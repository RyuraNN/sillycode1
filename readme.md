# 🏫 SillyCode — AI 校园角色扮演模拟器

一款基于 SillyTavern 的沉浸式 AI 文字角色扮演游戏。你将以学生（或教师）的身份进入一所虚构的高中，在 30+ 个互相联动的游戏系统中，体验一段属于你自己的校园生活。

前端 Vue 3 + Vite + Pinia，后端对接 SillyTavern API，所有游戏状态由前端驱动，AI 负责叙事。

---

## 🎭 角色塑造

**入学流程** — 完整的角色创建向导：姓名、性别、班级、人生目标（游戏模式）、家庭背景，支持自定义背景故事。

**成长经历** — 从幼年到初中的多阶段成长抉择，每个选择都会影响你的初始属性分布。

**天赋系统** — 多样化的天赋可供选择，每个天赋提供独特的游戏加成，塑造不同的游玩风格。

**属性体系** — 三维度属性系统：
- 6 大基础属性：智商、情商、体能、灵活、魅力、心境（每项有独立的潜力上限）
- 7 门学科知识：语文、数学、外语、文综、理综、艺术、体育
- 10 项生活技能：编程、绘画、吉他、钢琴、都市传说、烹饪、黑客技术、社媒运营、摄影、视频编辑

**状态系统** — HP（体力）、MP（精力）、经验值、金币，实时反映角色当前状态。

**经验与升级** — 积累经验提升等级，升级获得自由属性点，自由分配到任意属性/学科/技能。

**装备系统** — 7 个装备槽位（帽子、外套、上衣、裤子、袜子、鞋子、饰品），装备提供属性加成和主动效果。支持套装保存与快速切换。

---

## 📚 学业系统

**学业引擎** — 完整的学业模拟：课程表自动生成、学科知识影响考试成绩、AI 根据课程上下文生成教学场景。

**考试系统** — 三级考试体系：月考、期中考、期末考，每次考试覆盖不同科目范围。考试成绩由学科属性 + 随机波动计算，真实模拟考场发挥。

**成绩单与排名** — 每次考试后生成详细成绩单，包含各科分数、班级排名、年级排名，可追踪历次成绩变化趋势。

**选课系统** — 除必修课外，可自主选择选修课程。选课在学期初锁定，不同选修课影响日程安排和可学习的技能方向。

**日历系统** — 完整的校园日历：自动标注考试日、节假日、特殊事件。支持玩家添加自定义日程提醒。

---

## 👥 社交与 NPC

**社交 App** — 内置虚拟社交应用，功能完整：
- 私聊：与任意 NPC 一对一聊天，消息持久化存储
- 群聊：多人群组对话
- 朋友圈：查看 NPC 动态，点赞互动
- 未读红点提示 + 实时消息推送

**关系系统** — 四维关系轴，精确描述人际关系的复杂性：
- 亲密度（-100~100）：从疏远到亲密的情感距离
- 信赖度（-100~100）：从猜忌到信赖的可靠性判断
- 激情度（-100~100）：从反感到热情的浪漫吸引力
- 敌意（0~100）：负面关系强度

四轴组合产生丰富的关系状态：陌生人、熟人、朋友、好友、知己、挚友、心动、暧昧、恋人、灵魂伴侣、损友、亦敌亦友、宿敌、死敌……每段关系都是独一无二的。

**NPC 日程** — 每个 NPC 拥有独立的日程轨迹，一天划分为 9 个时间段：
清晨 → 早晨 → 上午课程 → 午休 → 下午课程 → 社团时间 → 傍晚 → 夜间 → 深夜。
不同性格的 NPC 有不同的行动模式（学霸型、社交型、运动型等），你可以根据时间和地点找到想见的人。

**NPC 情绪** — 基于关系四轴的综合评分，NPC 对玩家展现不同的情绪态度，从热情友好到冷淡敌视，影响对话和互动的基调。

**论坛系统** — 校园论坛，NPC 会发帖讨论校园事件，玩家也可以参与发帖和回复。

---

## 🌍 世界模拟

**天气系统** — 13 种天气类型（晴、多云、阴、阴沉、小雨、中雨、大雨、雷雨、小雪、中雪、大雪、雾、霾），基于马尔可夫链的连续天气流模拟：
- 4 季独立转换矩阵，每个季节有不同的天气概率分布
- 昼夜温差模拟（春 8°C / 夏 6°C / 秋 10°C / 冬 12°C）
- 恶劣天气影响户外活动和 NPC 行为

**事件系统** — 可编辑的事件库，支持条件触发（时间、地点、属性、关系等）。事件可以是一次性的或周期性的，影响游戏世界的状态。

**地图系统** — 可视化校园地图，支持拖拽、缩放、层级导航。地点之间有逻辑关系，NPC 会根据日程在不同地点之间移动。

**时间系统** — 完整的时间流转：年/月/日/星期/时/分。时间推进由 AI 叙事驱动，影响课程表、NPC 日程、天气变化、事件触发。

---

## 🎯 课外活动

**社团系统** — 加入校园社团，参与社团活动。社团有申请/邀请/拒绝机制，社团时间段（16:00-18:00）NPC 会前往各自的社团活动地点。

**打工系统** — 课余时间可以打工赚钱。记录工作历史和累计收入，打工状态影响角色的时间安排和体力消耗。

**外卖系统** — 点外卖功能，下单后等待配送。外卖订单有状态追踪，丰富日常生活的细节感。

**校规系统** — 动态校规机制：校规有适用对象（性别、角色类型）、生效范围（仅校园内）。AI 会根据当前生效的校规调整 NPC 行为和叙事，离开校园后校规自动失效。

---

## 📱 界面与交互

**虚拟手机** — 内置智能手机界面，集成社交 App、背包、地图、存档、日历等功能入口，一部手机搞定所有操作。

**弹幕通知** — 游戏状态变化（属性提升、物品获得、事件触发等）以弹幕形式实时飘过屏幕，信息传达直观不打断沉浸感。

**夜间模式** — 全界面深色主题适配，CSS 变量驱动的动态主题切换，保护视力，营造氛围。

**动态布局** — 左侧实时显示角色状态（时间、属性、背包），右侧提供系统菜单，中间是 AI 对话主区域。布局根据内容自适应调整。

---

## 🤖 AI 与存档

**SillyTavern 对接** — 完整的 SillyTavern API 集成：
- 流式传输：AI 回复逐字显示，打字机效果
- 停止生成：随时中断 AI 输出
- 自动重试：发送失败或停止后一键重试
- 合并发送：重试时输入新内容，系统自动将旧消息与新内容合并，方便补充信息
- 指令队列：社交消息等操作加入待发送队列，由 AI 统一处理

**建议回复** — 可选开启，AI 根据当前情境生成多个候选回复供玩家选择，降低输入门槛。

**摘要系统** — 三级自动摘要（小摘要 → 大摘要 → 超级摘要），在对话积累到一定楼层后自动触发，压缩历史上下文，保持 AI 的长期记忆而不超出 token 限制。支持使用独立的 Assistant AI 生成摘要。

**存档系统** — 存档自动保存在浏览器本地，刷新不丢失。支持导出为 JSON 文件备份，或从文件导入进度。快照系统记录每个关键节点的完整游戏状态。

**时光倒流** — 读取存档时可预览最近对话记录，点击任意一条即可回溯到该时刻，游戏状态（属性、物品、时间、关系等）精确恢复到那一刻。

**数据迁移** — 支持跨存档的数据导入导出，方便在不同设备间转移游戏进度。

---

*一个人的校园，三十个系统的世界。*
