# 项目计划清单

## 基础架构
- [x] 初始化 Vue 3 + Vite 项目
- [x] 集成 Pinia 状态管理
- [x] 引入 "Ma Shan Zheng" 字体
- [x] 配置全局 CSS 变量（字体等）
- [x] **构建配置**
    - [x] 单文件 HTML 打包 (vite-plugin-singlefile)
    - [x] CDN 依赖引入 (vite-plugin-cdn-import)

## 主页 (HomeLayout)
- [x] 创建主页布局组件
- [x] 实现主菜单按钮（开始游戏、读取存档、游戏设置）
- [x] 添加背景图片支持
- [x] 移动端适配（响应式布局）
- [x] **夜间模式**
    - [x] 全局样式适配
    - [x] 切换按钮

## 入学流程 (GameStart)
- [x] 创建入学通知书面板
- [x] **基本信息**
    - [x] 姓名输入
    - [x] 性别选择
    - [x] 班级选择与名册管理 (ClassRosterPanel)
- [x] **人生设定**
    - [x] 人生目标（游戏模式）选择
    - [x] 家庭背景选择（含预设选项）
    - [x] 家庭背景自定义功能（消耗50点，独立加点面板）
- [x] **成长经历**
    - [x] 幼年经历选择（3项，含自定义）
    - [x] 小学经历选择（3项，含自定义）
    - [x] 初中经历选择（3项，含自定义）
- [x] **天赋选择**
    - [x] 天赋选择（6项，含自定义）
- [x] **点数系统**
    - [x] 初始点数根据模式动态计算
    - [x] 选项消耗点数逻辑
    - [x] 点数不足时禁用“确认入学”
- [x] **自定义面板 (CustomOptionPanel)**
    - [x] 独立的组件化实现
    - [x] 支持自定义名称、描述、资金
    - [x] 属性、学科、技能加点（独立10点额度）
    - [x] 展开/收起额外选项

## 新生档案 (StudentProfile)
- [x] 创建档案展示组件
- [x] 展示基本信息、家庭、经历、天赋
- [x] 实现从上往下的滑入动画
- [x] 底部签名确认功能
- [x] 解决组件渲染和事件透传问题（单根节点修复）

## 游戏主界面 (GameMain)
- [x] 创建主界面组件
- [x] **布局**
    - [x] 左侧边栏（角色信息，响应式收折）
    - [x] 右侧边栏（系统菜单，默认收起）
    - [x] 中间主内容区
- [x] **底部交互区**
    - [x] 固定底部输入栏
    - [x] 扩展菜单按钮（圆形，点击弹出）
    - [x] 发送按钮
    - [x] AI 数据解析与状态更新（时间、经验等）
    - [x] **智能交互**
        - [x] 停止生成功能
        - [x] 失败/停止后的自动重试
        - [x] 修改内容后的合并发送
- [x] **美化**
    - [x] 护眼纸张背景色
    - [x] 字体应用
    - [x] 夜间模式适配
- [x] **左侧栏组件**
    - [x] 时间显示 (TimeDisplay)
    - [x] 头像显示与上传 (AvatarDisplay)
    - [x] 角色信息与加点 (CharacterInfo, AttributeLevelUp)
    - [x] 背包系统 (InventoryPanel)

## 游戏系统
- [x] **经验值系统**
    - [x] 基础属性经验与升级（满100升级，获自由点数）
    - [x] 学科与技能经验（独立经验条）
    - [x] AI 解析支持 (`exp` 模块)
- [x] **背包系统**
    - [x] 物品分类（消耗品、书籍、服装、重要、杂项）
    - [x] 物品效果描述
    - [x] 没落贵族传家宝实装
- [x] **地图系统**
    - [x] 地图数据结构与预设数据 (mapData.js)
    - [x] 地图面板组件 (MapPanel.vue)
    - [x] 层级导航与面包屑
    - [x] 拖拽与缩放交互
    - [x] 系统菜单集成
    - [x] 交互优化（解决拖拽冲突，末端弹窗，子地点预览）
- [x] **班级系统**
    - [x] 班级数据结构 (classData.js)
    - [x] 班级名册面板 (ClassRosterPanel)
    - [x] 角色增删改逻辑
    - [x] **世界书集成**
        - [x] 世界书解析器 (worldbookParser.js)
        - [x] 动态加载班级数据
        - [x] 班级条目激活策略切换 (蓝灯/绿灯)
- [x] **NPC 系统**
    - [x] 动态 NPC 记录 (AI 输出 `npcs` 数据)
    - [x] 初始 NPC 列表优化 (按需加载)
- [x] **存档系统**
    - [x] 存档数据结构设计 (SaveSnapshot)
    - [x] 存档/读取面板 (SavePanel)
    - [x] **高级功能**
        - [x] 本地持久化存储 (localStorage)
        - [x] 存档导入/导出 (JSON)
        - [x] 时光倒流回溯 (带状态恢复)

## 设置 (Settings)
- [x] 创建设置面板
- [x] 字体自定义功能（已暂时移除/隐藏）

## 待办事项 (TODO)
- [ ] **游戏核心逻辑**
    - [ ] 实现与 AI 后端的真实对接（目前为模拟）
- [ ] **内容填充**
    - [ ] 完善更多班级数据
    - [ ] 添加更多预设经历和天赋
